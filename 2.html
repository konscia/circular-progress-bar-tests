<meta charset="UTF-8"/>
<link rel="stylesheet" href="examples.css"/>

<h1>Exemplo 2 - Elemento <em>circle</em> e outras t√©cnicas</h1>
<p>
	Baseado no <em>CodePen</em>:
	<a href="https://codepen.io/nkunic/pen/jXBZWV">CodePen Home SVG circle progress bar using stroke-dashoffset</a>
</p>

<hr />

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="my-circle">
	<circle cx="50" cy="50" r="48" stroke-width="2" fill="none"/>
	<circle cx="50" cy="50" r="48" stroke-width="2" fill="none" id="my-circle-bar" />
</svg>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 34 34">
	<circle cx="16" cy="16" r="15.9155" class="progress-bar__background" />
	<circle cx="16" cy="16" r="15.9155"  class="progress-bar__progress js-progress-bar" />
</svg>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
	<circle cx="18" cy="18" r="17" class="progress-bar__background" />
	<circle cx="18" cy="18" r="17"  class="progress-bar__progress js-progress-bar specific-stroke-in-pix" vector-effect="non-scaling-stroke" id="my-circle-bar-in-pixels" />
</svg>

<hr/>

<p>
	A t√©cnica √© muito parecida com o <a href="./1.html" target="_blank">Exemplo 1</a>.
</p>
<p>
	As diferen√ßas s√£o que este exemplo:
</p>
<ul>
	<li>üî∂ Utiliza o elemento SVG <em>circle</em> ao inv√©s do elemento <em>path</em>;</li>
	<li>üî∂ Utiliza a anima√ß√£o na propriedade <em>stroke-dashoffset</em> ao inv√©s do <em>stroke-dasharray</em>;</li>
	<li>üî∂ Realiza a ativa√ß√£o da anima√ß√£o com JavaScript;</li>
</ul>
<p>Eu alterei o exemplo original para:</p>
<ul>
	<li>‚úÖ Usar vari√°veis CSS ao inv√©s de vari√°veis Sass;</li>
	<li>‚úÖ Criar um segundo exemplo de c√≠rculo com uma circunfer√™ncia diferente de 100 para testar como ficam os valores das propriedades stroke-dasharray e stroke-dashoffset nestes casos;</li>
	<li>‚úÖ Criar um terceiro exemplo onde a grossura da linha √© controlada com pixels diretamente, sem escalar. Nesse caso, o controle dos valores da linha devem ser em pixels.</li>
</ul>

<h2>Nota sobre a propriedade stroke-dashoffset</h2>

<p>
	Conforme a W3, <a href="https://www.w3.org/TR/svg-strokes/#StrokeDashing">a propriedade stroke-dashoffset</a>
	<em>"specifies the distance into the repeated dash pattern to start the stroke dashing at the beginning of the path"</em>,
	ou seja, o offset √© de qual ponto do PADR√ÉO a linha come√ßar√° a ser preenchida.
</p>
<p>
	O offset n√£o √© referente √† linha, mas ao padr√£o. O mais √≥bvio para mim era pensar que o offset seria um espa√ßo em branco
	antes de come√ßar o padr√£o da linha, mas n√£o, ele √© o ponto de in√≠cio do padr√£o na linha.
</p>
<p>
	Por exemplo, um padr√£o stroke-dashoffset poderia ser: "10 5" ou seja, preenche 10 unidades e d√° um espa√ßo de 5.
	Ao colocar um offset de 7 o padr√£o vis√≠vel na linha ser√° algo como: "3 5 10 5 10 5 ..." porque o offset come "7" unidades antes de iniciar o padr√£o.
</p>
<p>
	Nessa l√≥gica a anima√ß√£o pelo dash-offset √© uma anima√ß√£o ao contr√°rio, porque com o valor 0, a linha √© totalmente preenchida, um valor 100% traz o padr√£o da linha totalmente para tr√°s, escondendo-o.
	Por isso, neste exemplo, para a anima√ß√£o, o stroke-dashoffset √© iniciado com 100%, diferente do exemplo 1 onde ele nem √© usado porque a anima√ß√£o ocorre direto na propriedade stroke-dasharray.
</p>

<style>
	/* I changed the example to use css variables instead SCSS variables and add some comments */

	:root {
		--progress-bar-stroke-width: 1.8;
		--progress-bar-size: 300px;
	}

	svg {
		height: var(--progress-bar-size);
		width: var(--progress-bar-size);
		transform: rotate(-90deg);
	}

	svg.my-circle > circle:nth-child(1) {
		stroke: lightgray;
	}

	svg.my-circle > circle:nth-child(2) {
		stroke: lightsalmon;
		stroke-dasharray: 301.59, 301.59;
		stroke-dashoffset: 301.59;
		stroke-linecap: round;
		transition: stroke-dashoffset 1s ease-in-out;
	}

	.progress-bar__background {
		fill: none;
		stroke: #e2eff0;
		/*stroke-width: var(--progress-bar-stroke-width);*/
		stroke-width: 1px;
	}

	.progress-bar__progress {
		fill: none;
		stroke: #78bec7;
		stroke-dasharray: 100 100;
		stroke-dashoffset: 100;
		stroke-linecap: round;
		stroke-width: var(--progress-bar-stroke-width);
		transition: stroke-dashoffset 1s ease-in-out;
	}

	.progress-bar__progress.specific-stroke-in-pix {
		stroke-width: 5px;
		stroke-dasharray: 890.117918517 890.117918517;
		stroke-dashoffset: 890.117918517;
	}
</style>

<script>
	setTimeout(() => {
		const percentageComplete = 0.4;
		const strokeDashOffsetValue = 100 - (percentageComplete * 100);
		const progressBar = document.getElementsByClassName("js-progress-bar")[0];
		progressBar.style["stroke-dashoffset"] = strokeDashOffsetValue;
	}, 400);

	setTimeout(() => {
		const percentageComplete = 0.4;
		const strokeDashOffsetValue = 301.59 - (percentageComplete * 301.59);
		const progressBar = document.getElementById("my-circle-bar");
		progressBar.style["stroke-dashoffset"] = strokeDashOffsetValue;
	}, 700);

	setTimeout(() => {
		const percentageComplete = 0.4;
		const strokeDashOffsetValue = 857.143163627 - (percentageComplete * 857.143163627);
		const progressBar = document.getElementById("my-circle-bar-in-pixels");
		progressBar.style["stroke-dashoffset"] = strokeDashOffsetValue;
	}, 1000)
</script>